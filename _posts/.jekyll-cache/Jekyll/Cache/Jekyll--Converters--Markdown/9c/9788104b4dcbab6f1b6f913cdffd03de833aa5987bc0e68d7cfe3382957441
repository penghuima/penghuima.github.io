I"œY<ul id="markdown-toc">
  <li><a href="#ç›®æ ‡" id="markdown-toc-ç›®æ ‡">ç›®æ ‡</a></li>
  <li><a href="#1-å®‰è£…é•œåƒ" id="markdown-toc-1-å®‰è£…é•œåƒ">1. å®‰è£…é•œåƒ</a>    <ul>
      <li><a href="#11-å®‰è£…åœ°å€" id="markdown-toc-11-å®‰è£…åœ°å€">1.1 å®‰è£…åœ°å€</a></li>
      <li><a href="#12-docker-æ‹‰å–é•œåƒ" id="markdown-toc-12-docker-æ‹‰å–é•œåƒ">1.2 Docker æ‹‰å–é•œåƒ</a></li>
    </ul>
  </li>
  <li><a href="#2åˆ›å»ºdocker-ç½‘ç»œ" id="markdown-toc-2åˆ›å»ºdocker-ç½‘ç»œ">2.åˆ›å»ºDocker ç½‘ç»œ</a>    <ul>
      <li><a href="#21-dockerç½‘æ®µå‘½ä»¤" id="markdown-toc-21-dockerç½‘æ®µå‘½ä»¤">2.1 Dockerç½‘æ®µå‘½ä»¤</a></li>
      <li><a href="#22-åˆ›å»ºç½‘æ®µ" id="markdown-toc-22-åˆ›å»ºç½‘æ®µ">2.2 åˆ›å»ºç½‘æ®µ</a></li>
      <li><a href="#23-æŸ¥è¯¢ç½‘æ®µä¿¡æ¯" id="markdown-toc-23-æŸ¥è¯¢ç½‘æ®µä¿¡æ¯">2.3 æŸ¥è¯¢ç½‘æ®µä¿¡æ¯</a></li>
    </ul>
  </li>
  <li><a href="#3-åˆ›å»ºvolume" id="markdown-toc-3-åˆ›å»ºvolume">3. åˆ›å»ºVolume</a>    <ul>
      <li><a href="#31-docke-volumeå·å‘½ä»¤" id="markdown-toc-31-docke-volumeå·å‘½ä»¤">3.1 Docke Volumeå·å‘½ä»¤</a></li>
      <li><a href="#32-åˆ›å»ºå·" id="markdown-toc-32-åˆ›å»ºå·">3.2 åˆ›å»ºå·</a></li>
      <li><a href="#33-æŸ¥çœ‹å·" id="markdown-toc-33-æŸ¥çœ‹å·">3.3 æŸ¥çœ‹å·</a></li>
    </ul>
  </li>
  <li><a href="#4-åˆ›å»ºmysql-pxcå®¹å™¨" id="markdown-toc-4-åˆ›å»ºmysql-pxcå®¹å™¨">4. åˆ›å»ºMySQL PXCå®¹å™¨</a>    <ul>
      <li><a href="#41-åˆ›å»ºmasteræ•°æ®åº“" id="markdown-toc-41-åˆ›å»ºmasteræ•°æ®åº“">4.1 åˆ›å»ºMasteræ•°æ®åº“</a></li>
      <li><a href="#42-åˆ›å»ºå¤‡åº“" id="markdown-toc-42-åˆ›å»ºå¤‡åº“">4.2 åˆ›å»ºå¤‡åº“</a>        <ul>
          <li><a href="#è¯´æ˜" id="markdown-toc-è¯´æ˜">è¯´æ˜</a></li>
          <li><a href="#æ³¨æ„äº‹é¡¹" id="markdown-toc-æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</a></li>
        </ul>
      </li>
      <li><a href="#è¿æ¥æ•ˆæœ" id="markdown-toc-è¿æ¥æ•ˆæœ">è¿æ¥æ•ˆæœ</a></li>
      <li><a href="#æ•°æ®åŒæ­¥æµ‹è¯•" id="markdown-toc-æ•°æ®åŒæ­¥æµ‹è¯•">æ•°æ®åŒæ­¥æµ‹è¯•</a></li>
    </ul>
  </li>
  <li><a href="#æ€»ç»“" id="markdown-toc-æ€»ç»“">æ€»ç»“</a></li>
</ul>

<h2 id="ç›®æ ‡">ç›®æ ‡</h2>
<p>æ­å»ºä¸€ä¸ª5ä¸ªæ•°æ®åº“çš„é›†ç¾¤ã€æ•°æ®å®æ—¶åŒæ­¥</p>

<h2 id="1-å®‰è£…é•œåƒ">1. å®‰è£…é•œåƒ</h2>

<h3 id="11-å®‰è£…åœ°å€">1.1 å®‰è£…åœ°å€</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://hub.docker.com/r/percona/percona-xtradb-cluster
</code></pre></div></div>

<h3 id="12-docker-æ‹‰å–é•œåƒ">1.2 Docker æ‹‰å–é•œåƒ</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# docker pull percona/percona-xtradb-cluster
</code></pre></div></div>

<h2 id="2åˆ›å»ºdocker-ç½‘ç»œ">2.åˆ›å»ºDocker ç½‘ç»œ</h2>
<h3 id="21-dockerç½‘æ®µå‘½ä»¤">2.1 Dockerç½‘æ®µå‘½ä»¤</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#åˆ›å»ºç½‘æ®µã€å–åä¸ºï¼šnet1
[root@localhost ~]# docker network create net1
#æŸ¥çœ‹æŒ‡å®šç½‘æ®µè¯¦ç»†ä¿¡æ¯
[root@localhost ~]# docker network inspect net1
#åˆ é™¤æŒ‡å®šç½‘æ®µ
[root@localhost ~]# docker network rm net1
</code></pre></div></div>

<h3 id="22-åˆ›å»ºç½‘æ®µ">2.2 åˆ›å»ºç½‘æ®µ</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# docker network create --subnet=172.18.0.0/24 net1
</code></pre></div></div>

<!--more-->

<h3 id="23-æŸ¥è¯¢ç½‘æ®µä¿¡æ¯">2.3 æŸ¥è¯¢ç½‘æ®µä¿¡æ¯</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">network</span> <span class="n">inspect</span> <span class="n">net1</span>
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s">"Name"</span><span class="o">:</span> <span class="s">"net1"</span><span class="o">,</span>
        <span class="s">"Id"</span><span class="o">:</span> <span class="s">"0e197c8d61e37aad6e52188b2a185de7a723087fd88e57f36a2ac98443e2823a"</span><span class="o">,</span>
        <span class="s">"Created"</span><span class="o">:</span> <span class="s">"2019-05-16T15:25:46.447740525+08:00"</span><span class="o">,</span>
        <span class="s">"Scope"</span><span class="o">:</span> <span class="s">"local"</span><span class="o">,</span>
        <span class="s">"Driver"</span><span class="o">:</span> <span class="s">"bridge"</span><span class="o">,</span>
        <span class="s">"EnableIPv6"</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span>
        <span class="s">"IPAM"</span><span class="o">:</span> <span class="o">{</span>
            <span class="s">"Driver"</span><span class="o">:</span> <span class="s">"default"</span><span class="o">,</span>
            <span class="s">"Options"</span><span class="o">:</span> <span class="o">{},</span>
            <span class="s">"Config"</span><span class="o">:</span> <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s">"Subnet"</span><span class="o">:</span> <span class="s">"172.18.0.0/24"</span>
                <span class="o">}</span>
            <span class="o">]</span>
        <span class="o">},</span>
        <span class="s">"Internal"</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span>
        <span class="s">"Attachable"</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span>
        <span class="s">"Containers"</span><span class="o">:</span> <span class="o">{},</span>
        <span class="s">"Options"</span><span class="o">:</span> <span class="o">{},</span>
        <span class="s">"Labels"</span><span class="o">:</span> <span class="o">{}</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div></div>
<h2 id="3-åˆ›å»ºvolume">3. åˆ›å»ºVolume</h2>
<h3 id="31-docke-volumeå·å‘½ä»¤">3.1 Docke Volumeå·å‘½ä»¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span><span class="n">åˆ›å»ºç½‘æ®µ</span><span class="err">ã€</span><span class="n">å–åä¸º</span><span class="err">ï¼š</span><span class="n">v1</span>
<span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">volume</span> <span class="n">create</span> <span class="n">v1</span>
<span class="err">#</span><span class="n">æŸ¥çœ‹æŒ‡å®šå·è¯¦ç»†ä¿¡æ¯</span>
<span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">volume</span> <span class="n">inspect</span> <span class="n">v1</span>
<span class="err">#</span><span class="n">åˆ é™¤æŒ‡å®šå·</span>
<span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">volume</span> <span class="n">rm</span> <span class="n">v1</span>
<span class="err">#</span><span class="n">æŸ¥çœ‹å·ä¿¡æ¯</span>
<span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">volume</span> <span class="n">ls</span>
</code></pre></div></div>
<h3 id="32-åˆ›å»ºå·">3.2 åˆ›å»ºå·</h3>
<p>å› ä¸ºè¦æ­å»º5ä¸ªæ•°æ®åº“çš„é›†ç¾¤ã€æ‰€ä»¥åˆ›å»º5ä¸ªå·</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">volume</span> <span class="n">create</span> <span class="n">v1</span>
<span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">volume</span> <span class="n">create</span> <span class="n">v2</span>
<span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">volume</span> <span class="n">create</span> <span class="n">v3</span>
<span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">volume</span> <span class="n">create</span> <span class="n">v4</span>
<span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">volume</span> <span class="n">create</span> <span class="n">v5</span>
</code></pre></div></div>
<h3 id="33-æŸ¥çœ‹å·">3.3 æŸ¥çœ‹å·</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">volume</span> <span class="n">inspect</span> <span class="n">v1</span>
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s">"Driver"</span><span class="o">:</span> <span class="s">"local"</span><span class="o">,</span>
        <span class="s">"Labels"</span><span class="o">:</span> <span class="o">{},</span>
        <span class="s">"Mountpoint"</span><span class="o">:</span> <span class="s">"/var/lib/docker/volumes/v1/_data"</span><span class="o">,</span>
        <span class="s">"Name"</span><span class="o">:</span> <span class="s">"v1"</span><span class="o">,</span>
        <span class="s">"Options"</span><span class="o">:</span> <span class="o">{},</span>
        <span class="s">"Scope"</span><span class="o">:</span> <span class="s">"local"</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div></div>
<h2 id="4-åˆ›å»ºmysql-pxcå®¹å™¨">4. åˆ›å»ºMySQL PXCå®¹å™¨</h2>
<h3 id="41-åˆ›å»ºmasteræ•°æ®åº“">4.1 åˆ›å»ºMasteræ•°æ®åº“</h3>
<p>mysqlçš„é»˜è®¤å¸å·æ˜¯: <code class="language-plaintext highlighter-rouge">root</code></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="n">images</span><span class="o">]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">p</span> <span class="mi">3306</span><span class="o">:</span><span class="mi">3306</span> 
<span class="o">-</span><span class="n">v</span> <span class="nl">v1:</span><span class="o">/</span><span class="kt">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="n">root123456</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">CLUSTER_NAME</span><span class="o">=</span><span class="no">PXC</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">XTRABACKUP_PASSWORD</span><span class="o">=</span><span class="n">root123456</span> 
<span class="o">--</span><span class="n">privileged</span> 
<span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="n">my1</span> 
<span class="o">--</span><span class="n">net</span><span class="o">=</span><span class="n">net1</span> 
<span class="o">--</span><span class="n">ip</span> <span class="mf">172.18</span><span class="o">.</span><span class="mf">0.2</span>
<span class="n">percona</span><span class="o">-</span><span class="n">xtradb</span><span class="o">-</span><span class="nl">cluster:</span><span class="n">latest</span>
</code></pre></div></div>
<p>å‚æ•°è¯´æ˜ï¼š
â€‹	-dï¼šåç«¯å¯åŠ¨å®¹å™¨
â€‹	-p:å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£ï¼ŒæŠŠå®¹å™¨ä¸­çš„ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£ä¸Šï¼Œè®¿é—®å®¿ä¸»æœºç«¯å£å°±æ˜¯ç›´æ¥è®¿é—®å®¹å™¨
â€‹	-v:å·:å®¹å™¨ç›®å½•ï¼ŒæŠŠå·æŒ‚è½½åœ¨å®¹å™¨é‡Œé¢
â€‹	-e:å¯åŠ¨å‚æ•°
â€‹		MYSQL_ROOT_PASSWORD:mysqlçš„å¯†ç (è‡ªå®šä¹‰)
â€‹		CLUSTER_NAME:é›†ç¾¤åå­—(è‡ªå®šä¹‰)
â€‹		XTRABACKUP_PASSWORD:æ•°æ®åº“èŠ‚ç‚¹é—´æ•°æ®åŒæ­¥çš„å¯†ç (è‡ªå®šä¹‰)
â€‹	â€“privileged:æˆäºˆæƒé™
â€‹	â€“name:å®¹å™¨å‘½å
â€‹	â€“net:ç»‘å®šç½‘æ®µ
â€‹	â€“ip:ç»‘å®šip,ipåœ°å€ä¸ºç»‘å®šç½‘æ®µå†…ip
â€‹	percona-xtradb-cluster:latest:è¿è¡Œçš„é•œåƒ</p>

<h3 id="42-åˆ›å»ºå¤‡åº“">4.2 åˆ›å»ºå¤‡åº“</h3>
<h4 id="è¯´æ˜">è¯´æ˜</h4>
<p>åŠ å››ä¸ªä»æ•°æ®åº“</p>

<p><strong>ç‰¹åˆ«æ³¨æ„ï¼šåˆ›å»ºå¤‡åº“çš„æ—¶å€™ã€å¿…é¡»è¦ç­‰ä¸»åº“å¯ä»¥æˆåŠŸè¿æ¥ä¸Šäº†ã€æ‰å¯ä»¥åˆ›å»ºã€ä¸ç„¶ä¼šå‡ºç°å®¹å™¨é—ªé€€çš„é—®é¢˜ã€‚åŸå› æ˜¯å®¹å™¨å¯åŠ¨å¿«ã€ä½†æ˜¯å®¹å™¨é‡ŒæœåŠ¡å¯åŠ¨æ…¢ã€‚</strong></p>

<h4 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h4>
<p>â€‹	1. ä¿®æ”¹æŒ‚è½½çš„å·   <br />
â€‹	2. ä¿®æ”¹å®¿ä¸»æœºç«¯å£ï¼Œç«¯å£å”¯ä¸€  <br />
â€‹	3. æ·»åŠ æŒ‡å®šçš„ç¾¤å,-e CLUSTER_JOIN=my1  <br />
â€‹	4. ä¿®æ”¹å®¹å™¨å  <br />
â€‹	5. ä¿®æ”¹ip  <br />
â€‹	6. å¿…é¡»ç­‰ç¬¬ä¸€ä¸ªå®¹å™¨æœåŠ¡åˆ›å»ºæˆåŠŸæ‰èƒ½åˆ›å»ºç¬¬äºŒä¸ªã€é€šè¿‡å®¢æˆ·ç«¯å·¥å…·éªŒè¯ï¼Œä¸ç„¶ä¼šå‡ºç°é—ªé€€æƒ…å†µ</p>

<p>my2:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="n">images</span><span class="o">]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">p</span> <span class="mi">3307</span><span class="o">:</span><span class="mi">3306</span> 
<span class="o">-</span><span class="n">v</span> <span class="nl">v2:</span><span class="o">/</span><span class="kt">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="n">root123456</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">CLUSTER_NAME</span><span class="o">=</span><span class="no">PXC</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">XTRABACKUP_PASSWORD</span><span class="o">=</span><span class="n">root123456</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">CLUSTER_JOIN</span><span class="o">=</span><span class="n">my1</span> 
<span class="o">--</span><span class="n">privileged</span> 
<span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="n">my2</span>
<span class="o">--</span><span class="n">net</span><span class="o">=</span><span class="n">net1</span> 
<span class="o">--</span><span class="n">ip</span> <span class="mf">172.18</span><span class="o">.</span><span class="mf">0.3</span>
<span class="n">percona</span><span class="o">-</span><span class="n">xtradb</span><span class="o">-</span><span class="nl">cluster:</span><span class="n">latest</span>
</code></pre></div></div>
<p>å‚æ•°è¯´æ˜ï¼š
â€‹	CLUSTER_JOINï¼šéœ€è¦åŠ å…¥åˆ°ä¸»é›†ç¾¤ä¸­ã€ä¸»mysqlåå­—,è·Ÿä¸»æ•°æ®æ•°æ®åŒæ­¥</p>

<p>my3:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="n">images</span><span class="o">]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">p</span> <span class="mi">3307</span><span class="o">:</span><span class="mi">3306</span> 
<span class="o">-</span><span class="n">v</span> <span class="nl">v3:</span><span class="o">/</span><span class="kt">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="n">root123456</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">CLUSTER_NAME</span><span class="o">=</span><span class="no">PXC</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">XTRABACKUP_PASSWORD</span><span class="o">=</span><span class="n">root123456</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">CLUSTER_JOIN</span><span class="o">=</span><span class="n">my1</span> 
<span class="o">--</span><span class="n">privileged</span> 
<span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="n">my3</span>
<span class="o">--</span><span class="n">net</span><span class="o">=</span><span class="n">net1</span> 
<span class="o">--</span><span class="n">ip</span> <span class="mf">172.18</span><span class="o">.</span><span class="mf">0.4</span>
<span class="n">percona</span><span class="o">-</span><span class="n">xtradb</span><span class="o">-</span><span class="nl">cluster:</span><span class="n">latest</span>
</code></pre></div></div>
<p>my4:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="n">images</span><span class="o">]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">p</span> <span class="mi">3307</span><span class="o">:</span><span class="mi">3306</span> 
<span class="o">-</span><span class="n">v</span> <span class="nl">v4:</span><span class="o">/</span><span class="kt">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="n">root123456</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">CLUSTER_NAME</span><span class="o">=</span><span class="no">PXC</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">XTRABACKUP_PASSWORD</span><span class="o">=</span><span class="n">root123456</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">CLUSTER_JOIN</span><span class="o">=</span><span class="n">my1</span> 
<span class="o">--</span><span class="n">privileged</span> 
<span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="n">my4</span>
<span class="o">--</span><span class="n">net</span><span class="o">=</span><span class="n">net1</span> 
<span class="o">--</span><span class="n">ip</span> <span class="mf">172.18</span><span class="o">.</span><span class="mf">0.5</span>
<span class="n">percona</span><span class="o">-</span><span class="n">xtradb</span><span class="o">-</span><span class="nl">cluster:</span><span class="n">latest</span>
</code></pre></div></div>
<p>my5:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="n">images</span><span class="o">]</span><span class="err">#</span> <span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">p</span> <span class="mi">3307</span><span class="o">:</span><span class="mi">3306</span> 
<span class="o">-</span><span class="n">v</span> <span class="nl">v5:</span><span class="o">/</span><span class="kt">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="n">root123456</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">CLUSTER_NAME</span><span class="o">=</span><span class="no">PXC</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">XTRABACKUP_PASSWORD</span><span class="o">=</span><span class="n">root123456</span> 
<span class="o">-</span><span class="n">e</span> <span class="no">CLUSTER_JOIN</span><span class="o">=</span><span class="n">my1</span> 
<span class="o">--</span><span class="n">privileged</span> 
<span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="n">my5</span>
<span class="o">--</span><span class="n">net</span><span class="o">=</span><span class="n">net1</span> 
<span class="o">--</span><span class="n">ip</span> <span class="mf">172.18</span><span class="o">.</span><span class="mf">0.6</span>
<span class="n">percona</span><span class="o">-</span><span class="n">xtradb</span><span class="o">-</span><span class="nl">cluster:</span><span class="n">latest</span>
</code></pre></div></div>
<h3 id="è¿æ¥æ•ˆæœ">è¿æ¥æ•ˆæœ</h3>

<p><strong>æ³¨æ„äº‹é¡¹ï¼šè¿æ¥çš„æ˜¯å®¿ä¸»æœºçš„ipå’Œportã€å¹¶ä¸æ˜¯å®¹å™¨å†…éƒ¨åœ°å€</strong></p>

<p><img src="/images/2019-05-17/db.png" alt="æµ‹è¯•è¿æ¥" /></p>

<h3 id="æ•°æ®åŒæ­¥æµ‹è¯•">æ•°æ®åŒæ­¥æµ‹è¯•</h3>
<ol>
  <li>æ‰“å¼€db1æ•°æ®åº“ã€åˆ›å»ºä¸€ä¸ªschemas(æ•°æ®åº“)åä¸ºï¼šblank</li>
  <li>æŸ¥çœ‹db2ã€db3ã€db4ã€db5 æ•°æ®åº“æ˜¯å¦æœ‰è‡ªåŠ¨åˆ›å»ºblankæ•°æ®åº“</li>
  <li>åœ¨è¯¥æ•°æ®åº“(db1)åˆ›å»ºä¸€ä¸ªè¡¨åï¼šstudentã€å¹¶æ·»åŠ æ•°æ®</li>
  <li>åœ¨ä»»æ„æ•°æ®åº“æŸ¥çœ‹æ•°æ®æ˜¯å¦åŒæ­¥è¿‡æ¥</li>
</ol>

<p><img src="/images/2019-05-17/db1.png" alt="åˆ›å»ºæ•°æ®åº“" />  <br />
  åˆ›å»ºæ•°æ®åº“</p>

<p><img src="/images/2019-05-17/db2.png" alt="æ·»åŠ ä¸€æ¡æ•°æ®" />  <br />
  æ·»åŠ ä¸€æ¡æ•°æ®</p>

<p><img src="/images/2019-05-17/db3.png" alt="æŸ¥çœ‹å…¶å®ƒæ•°æ®åº“åŒæ­¥" />  <br />
  æŸ¥çœ‹å…¶å®ƒæ•°æ®åº“åŒæ­¥</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>è‡³æ­¤ã€æ•°æ®åº“é›†ç¾¤å·²ç»å¤„ç†å¥½äº†ï¼Œæ•°æ®åŒæ­¥ä¹Ÿå·²ç»å¯ä»¥äº†ï¼
é¡¹ç›®åªè¦è¿æ¥ä»»æ„ä¸€ä¸ªæ•°æ®åº“å°±å¯ä»¥åŒæ­¥äº†ï¼
ç¼ºç‚¹ï¼š
â€‹	å•èŠ‚ç‚¹å¤„ç†æ‰€æœ‰è¯·æ±‚ã€è´Ÿè½½é«˜ã€æ€§èƒ½å·®</p>

<p><img src="/images/2019-05-17/tb.png" alt="è¯·æ±‚ä¸èƒ½åˆ†å‘" />  <br />
è¯·æ±‚ä¸èƒ½åˆ†å‘</p>

<blockquote>
  <p>è§£å†³æ–¹æ³•ï¼š
 ä½¿ç”¨Haproxyåšè´Ÿè½½å‡è¡¡ã€è¯·æ±‚è¢«å‡åŒ€åˆ†å‘ç»™èŠ‚ç‚¹ï¼Œå•ç‚¹è´Ÿè½½ä½ï¼Œæ€§èƒ½å¥½</p>
</blockquote>

<p><img src="/images/2019-05-17/lb.png" alt="è¯·æ±‚ä¸èƒ½åˆ†å‘" /></p>

<hr />
<p>æ²ä¸ä½ çš„è¿™ç¢—èŒ¶å°šæ¸©çƒ­ï¼Œä¸€ç‚¹åéƒ½å¦‚æœ¬å¿ƒï¼Œä¹åˆ†äººé—´çƒŸç«ã€‚</p>

<p>â€“ ã€Šå¥½å—å¥½çš„ã€‹</p>
:ET